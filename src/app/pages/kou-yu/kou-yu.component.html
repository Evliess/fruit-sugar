<div class="container">
  <div class="list-container">
    @if(isCustom) {
    <div class="word-row">
      <div class="row-main">
        <div class="word-info">
          <input nz-input [(ngModel)]="userWord" />
        </div>
        <div class="action-group">
          <button nz-button nzType="primary" nz-tooltip nzLoading="isLoading" nzTooltipTitle="æ·»åŠ " (click)="addCustom(userWord)">
            <span nz-icon nzType="plus"></span> æ·»åŠ 
          </button>
        </div>
      </div>
    </div>
    }
    @for (item of sentences.slice(0, 10); track item.id) {
    <!-- å•ä¸ªå•è¯è¡Œ -->
    <div class="word-row" [class.is-known]="item.isKnown" appHoverSound (soundClick)="handleSound(item, 'us')">

      <!-- ä¸ŠåŠéƒ¨åˆ†ï¼šä¸»è¦ä¿¡æ¯ + æ“ä½œæŒ‰é’® -->
      <div class="row-main">

        <!-- å·¦ä¾§ï¼šå•è¯ä¿¡æ¯ -->
        <div class="word-info">
          <div class="word-title-group">
            <span class="word-text">{{ item.sentence_en }}</span>
            @if (item.isKnown) {
            <nz-tag [nzColor]="'success'">å·²æŒæ¡</nz-tag>
            }
          </div>
          <div class="phonetic-group">
            <span class="phonetic">ğŸ‡ºğŸ‡¸ <nz-icon class="sound-icon" nzType="muted" nzTheme="outline" appHoverSound
                [hoverTime]="500" (hoverTimeout)="handleSound(item, 'us')"></nz-icon></span>
            <span class="phonetic">ğŸ‡¬ğŸ‡§ <nz-icon class="sound-icon" nzType="muted" nzTheme="outline" appHoverSound
                [hoverTime]="500" (hoverTimeout)="handleSound(item, 'uk')"></nz-icon></span>
          </div>
          <div class="definition">{{ item.sentence_zh }}</div>
        </div>

        <!-- å³ä¾§ï¼šæŒ‰é’®ç»„ -->
        <div class="action-group">
          <!-- è®¤è¯† -->
          @if(!isCustom) {
            <button nz-button nzType="text" [nzType]="item.isKnown ? 'primary' : 'default'" [nzGhost]="item.isKnown"
              (click)="$event.stopPropagation();markAsKnown(item)" nz-tooltip nzTooltipTitle="æ ‡è®°ä¸ºè®¤è¯†">
              <span nz-icon nzType="check"></span> è®¤è¯†
            </button>

            <!-- ä¸è®¤è¯† -->
            <button nz-button nzType="default" nzDanger (click)="$event.stopPropagation();markAsUnknown(item)" nz-tooltip
              nzTooltipTitle="æ ‡è®°ä¸ºä¸è®¤è¯†">
              <span nz-icon nzType="close"></span> ä¸è®¤è¯†
            </button>
          }



          <!-- æ˜¾ç¤ºå…¨éƒ¨/æ”¶èµ· -->

          <!-- <button nz-button nzType="default" (click)="toggleDetails(item)">
            <span nz-icon [nzType]="item.showDetails ? 'up' : 'down'"></span>
            {{ item.showDetails ? 'æ”¶èµ·' : 'è¯¦æƒ…' }}
          </button> -->

          <!-- ç»ƒä¸€ç»ƒ -->
          <button nz-button nzType="primary" (click)="$event.stopPropagation();openPractice(item)">
            <span nz-icon nzType="edit"></span> ç»ƒä¸€ç»ƒ
          </button>
          @if(isCustom) {
          <button nz-button nzType="default" nzDanger (click)="$event.stopPropagation();deleteCustomSentence(item)"
            nz-tooltip nzTooltipTitle="åˆ é™¤">
            <span nz-icon nzType="delete"></span> åˆ é™¤
          </button>
          }
        </div>
      </div>
    </div>
    }
    @defer (on timer(50ms)) {
    @for (item of sentences.slice(10); track item.id) {
    <!-- å•ä¸ªå•è¯è¡Œ -->
    <div class="word-row" [class.is-known]="item.isKnown" appHoverSound (soundClick)="handleSound(item, 'us')">

      <!-- ä¸ŠåŠéƒ¨åˆ†ï¼šä¸»è¦ä¿¡æ¯ + æ“ä½œæŒ‰é’® -->
      <div class="row-main">

        <!-- å·¦ä¾§ï¼šå•è¯ä¿¡æ¯ -->
        <div class="word-info">
          <div class="word-title-group">
            <span class="word-text">{{ item.sentence_en }}</span>
            @if (item.isKnown) {
            <nz-tag [nzColor]="'success'">å·²æŒæ¡</nz-tag>
            }
          </div>
          <div class="phonetic-group">
            <span class="phonetic">ğŸ‡ºğŸ‡¸ <nz-icon class="sound-icon" nzType="muted" nzTheme="outline" appHoverSound
                [hoverTime]="500" (hoverTimeout)="handleSound(item, 'us')"></nz-icon></span>
            <span class="phonetic">ğŸ‡¬ğŸ‡§ <nz-icon class="sound-icon" nzType="muted" nzTheme="outline" appHoverSound
                [hoverTime]="500" (hoverTimeout)="handleSound(item, 'uk')"></nz-icon></span>
          </div>
          <div class="definition">{{ item.sentence_zh }}</div>
        </div>

        <!-- å³ä¾§ï¼šæŒ‰é’®ç»„ -->
        <div class="action-group">

          <!-- è®¤è¯† -->
          @if(!isCustom) {
          <button nz-button nzType="text" [nzType]="item.isKnown ? 'primary' : 'default'" [nzGhost]="item.isKnown"
            (click)="$event.stopPropagation();markAsKnown(item)" nz-tooltip nzTooltipTitle="æ ‡è®°ä¸ºè®¤è¯†">
            <span nz-icon nzType="check"></span> è®¤è¯†
          </button>

          <!-- ä¸è®¤è¯† -->
          <button nz-button nzType="default" nzDanger (click)="$event.stopPropagation();markAsUnknown(item)" nz-tooltip
            nzTooltipTitle="æ ‡è®°ä¸ºä¸è®¤è¯†">
            <span nz-icon nzType="close"></span> ä¸è®¤è¯†
          </button>
        }



          <!-- æ˜¾ç¤ºå…¨éƒ¨/æ”¶èµ· -->

          <!-- <button nz-button nzType="default" (click)="toggleDetails(item)">
            <span nz-icon [nzType]="item.showDetails ? 'up' : 'down'"></span>
            {{ item.showDetails ? 'æ”¶èµ·' : 'è¯¦æƒ…' }}
          </button> -->

          <!-- ç»ƒä¸€ç»ƒ -->
          <button nz-button nzType="primary" (click)="$event.stopPropagation();openPractice(item)">
            <span nz-icon nzType="edit"></span> ç»ƒä¸€ç»ƒ
          </button>
          @if(isCustom) {
          <button nz-button nzType="default" nzDanger (click)="$event.stopPropagation();deleteCustomSentence(item)"
            nz-tooltip nzTooltipTitle="åˆ é™¤">
            <span nz-icon nzType="delete"></span> åˆ é™¤
          </button>
          }
        </div>
      </div>
    </div>
    }}
  </div>

  <!-- ç»ƒä¸€ç»ƒ å¼¹çª— (ä¿æŒä¸å˜) -->
  <nz-modal [(nzVisible)]="isPracticeVisible" [nzTitle]="'å£è¯­ç»ƒä¹ '" (nzOnCancel)="handlePracticeCancel()"
    (nzOnOk)="handlePracticeOk()">
    <ng-container *nzModalContent>
      <p class="modal-desc">é‡Šä¹‰ï¼š{{ practiceWord?.sentence_zh }}</p>
      <input nz-input placeholder="è¯·åœ¨æ­¤è¾“å…¥..." [(ngModel)]="practiceInput" (keydown.enter)="handlePracticeOk()" />
    </ng-container>
  </nz-modal>
</div>